üß† instructions.md ‚Äî Wessley Frontend (Next.js + ChatUI + shadcn/ui)
üéØ Mission

You are building the frontend foundation of Wessley AI ‚Äî an AI-assisted project-car companion that visualizes and manages a car‚Äôs electrical system in 3D.

This phase focuses on the Next.js app, preparing a working UI shell that will later connect to:

the backend (for model data, scene logic, etc.), and

the 3D model/scene engine (Three.js or React Three Fiber).

The goal is to produce a fully functional, modular scaffold:

homepage with hero section and dark/light mode

chat interface (ChatUI)

3D scene viewer (placeholder for now)

‚Äúscene explorer‚Äù panel (component list)

unified visual + interaction system (shadcn + Tailwind + Zustand bus)

The background/hero visuals will be designed later ‚Äî leave that part blank with proper container placeholders.

üß© Tech Stack Requirements

Framework: Next.js (App Router, TypeScript, ESLint)

Styling: Tailwind CSS

UI Kit: shadcn/ui (for buttons, cards, sheets, etc.)

Chat Interface: ChatUI (@chatui/core)

State Management: Zustand

Icons: lucide-react

Code Quality: Prettier + Prettier Tailwind plugin

File Aliases: @/*

üèóÔ∏è Core Layout Overview
1. Homepage
Section	Description
Hero Header	Contains logo, title (‚ÄúMeet Wessley‚Äù), short description, and CTA ‚ÄúStart Building ‚Üí‚Äù.
3D Scene Window	Placeholder for now. A card container with SceneCanvas that will later load and render a 3D car model.
Chat Window	Uses ChatUI for user interaction, capable of sending textual commands that trigger scene changes (like /focus, /highlight, /view).
Scene Explorer	A small scrollable list showing all electrical components currently in the scene. Each item can be clicked to ‚Äúfocus‚Äù on that part.
Top Nav	Contains navigation links: About, Contact, Login, Sign Up.
Theme Toggle	Switch between dark and light modes.

The layout will later evolve into a multi-pane car project dashboard:
Left (explorer), center (3D scene), right (chat/assistant).
For now, we focus on the homepage structure and integration between chat + scene.

üîå Functional Concepts
A. Scene

Placeholder canvas component (SceneCanvas).

Uses a Zustand bus to receive commands and later communicate with 3D scene logic.

Supports basic commands even before the 3D engine is implemented:

FOCUS ‚Üí log which component is being focused.

HIGHLIGHT ‚Üí log highlighted components.

CLEAR_HIGHLIGHT

SET_VIEW

THEME

B. Chat

Implemented using ChatUI.

Initially includes:

A welcome message: ‚ÄúWhat kind of car are we working on?‚Äù

Text input with simple regex parser to detect local ‚Äúcommands‚Äù (e.g., /focus battery01).

When commands are recognized, they dispatch messages to the SceneBus.

C. Scene Explorer

Displays a list of mock components.

Clicking on an item triggers a FOCUS command via Zustand.

Will later sync with backend-fetched scene data.

D. Message Bus (Zustand)

Two shared stores:

useSceneBus ‚Äî manages scene state, components, and dispatch logic.

useChatBus ‚Äî helper that translates chat tool calls into scene commands.

Purpose:

Enables interaction between Chat ‚Üí Scene and Scene ‚Üí Chat without tight coupling.

üìÅ Folder Structure
/app
  layout.tsx
  page.tsx
  globals.css
/components
  /layout
    AppShell.tsx
    TopNav.tsx
  /scene
    SceneCanvas.tsx
    SceneExplorer.tsx
  /chat
    ChatPanel.tsx
  /ui
    ... (generated by shadcn)
  /theme
    ThemeToggle.tsx
/lib
  /bus
    useSceneBus.ts
    useChatBus.ts
  /types
    scene.ts
    chat.ts
/public
  /logo.svg

üß† Expected Behavior

The SceneCanvas renders a placeholder area (card) that logs incoming scene commands.

The ChatPanel renders ChatUI:

Typing /focus battery01 triggers a SceneBus dispatch with type: "FOCUS".

Typing regular text simply displays the message.

The SceneExplorer shows a mocked list (3‚Äì5 example components).

Clicking one sends a focus event to SceneBus.

The layout supports light/dark themes, switchable via theme toggle in the footer/nav.

Everything is modular ‚Äî future pages (dashboard, about, etc.) can extend the structure.

üé® Design Notes

Color theme: Matrix green on black (dark) and green on white (light).

Font: Inter or JetBrains Mono (developer-like aesthetic).

Buttons and cards use rounded corners (rounded-2xl), subtle shadows, and modern spacing.

Animations: minimal fade/slide for chat and scene cards.

Keep it sleek and grid-aligned ‚Äî Wessley‚Äôs brand vibe is ‚Äútech-garage meets AI companion‚Äù.

üß∞ Tasks Breakdown
Phase 1 ‚Äì Environment Setup

 Initialize Next.js (TS + App Router + alias @/*).

 Configure TailwindCSS + dark/light theme.

 Install & configure shadcn/ui components.

 Add ChatUI + Zustand + lucide-react.

 Add Prettier config for Tailwind sorting.

Phase 2 ‚Äì Base Layout

 Create AppShell with TopNav and basic layout grid.

 Implement theme toggle.

 Add Hero section placeholders (text and CTA).

 Style responsive two-column layout (scene/chat).

Phase 3 ‚Äì Chat System

 Create ChatPanel using ChatUI.

 Implement message send and display logic.

 Detect ‚Äútool‚Äù commands via /command syntax.

 Connect ChatPanel ‚Üí SceneBus.

Phase 4 ‚Äì Scene System

 Create placeholder SceneCanvas.

 Implement Zustand useSceneBus (dispatch + subscribe).

 Add mock data for 3‚Äì5 car components.

 Implement SceneExplorer showing component list and focus buttons.

Phase 5 ‚Äì Integration

 SceneCanvas listens to SceneBus.

 SceneExplorer dispatches FOCUS.

 ChatPanel dispatches tool commands.

 Verify state flow across all components.

 Ensure full responsiveness (mobile / tablet / desktop).

üß± Deliverables

At the end of this task:

A running Next.js dev server (npm run dev).

Homepage accessible at / that shows:

Header + hero text (‚ÄúMeet Wessley‚Äù).

Scene window (placeholder card).

Chat window with working ChatUI input.

Scene explorer showing mock component list.

Light/dark theme toggle works.

All architecture files are ready for backend + 3D integration.

üß≠ Next Steps (after this phase)

Connect 3D model using Three.js / React Three Fiber.

Integrate backend endpoints for loading wiring data.

Build ‚Äúfocus‚Äù camera transitions.

Add live circuit highlighting.

Sync Chat with backend LLM assistant (OpenAI/Claude endpoint).

Implement user login (OAuth) and project persistence.

‚úÖ Definition of Done

App boots and runs locally (npm run dev).

All described components render correctly.

Chat commands visibly affect state (e.g., log focus events).

Code passes ESLint + Prettier.

Directory structure matches spec.

No unhandled errors in console.

üß© tasks/claude_build ‚Äî Wessley FE Scaffold (Next.js + ChatUI + shadcn/ui)

Scope: No heavy 3D logic and do not touch hero background styles. Produce a production-grade scaffold for the homepage with a Scene placeholder, ChatUI panel, Scene Explorer, and a unidirectional message bus (Zustand).

Repository assumptions

Monorepo or single repo is fine. If monorepo, app lives at apps/wessley-web.

Node ‚â• 18.18, npm ‚â• 9.

Git default branch: main.

Branching & PR etiquette

Branch naming: feat/<area>-<short-desc> (e.g., feat/fe-boot-chatui).

One logical group per PR, max 300 lines diff if possible.

PR template checklist (Claude must include):

 Matches folder structure spec

 No background styles altered

 Dark/light theme works

 Mobile/desktop responsive checks complete

 Lint + typecheck pass

 Screen capture attached (PNG/GIF)

TASK 0 ‚Äî Project bootstrap

Branch: chore/fe-bootstrap
Goal: Create Next.js app with TS, Tailwind, shadcn, ChatUI, Zustand, Prettier config.

Steps (high level):

Create Next.js app (App Router, TS). Alias @/*. Strict mode on.

Install: tailwindcss, postcss, autoprefixer, @chatui/core @chatui/addons, zustand, lucide-react, class-variance-authority, clsx, prettier prettier-plugin-tailwindcss.

Init Tailwind; wire to app/globals.css.

Init shadcn/ui; add primitives: button card input textarea dropdown-menu dialog sheet tabs tooltip scroll-area badge separator toggle.

Prettier + Tailwind plugin config.

Add npm scripts: dev, build, start, lint, check.

Acceptance criteria:

npm run dev starts.

/ shows default Next page (temporary).

npm run lint and npm run check pass.

Commit message:

chore(fe): bootstrap Next.js (TS, App Router) + Tailwind + shadcn/ui + ChatUI + Zustand


PR title:
chore(fe): bootstrap Next.js app with UI deps

TASK 1 ‚Äî Base layout & navigation

Branch: feat/layout-topnav-shell
Goal: App shell with top navigation and page container. No background styling.

Steps:

Create components/layout/AppShell with header/footer placeholders.

Create components/layout/TopNav with: Logo (text ok), About, Contact, Login, Sign up (shadcn Buttons).

Implement /app/layout.tsx using AppShell.

Add ThemeToggle (light/dark) in header or footer (shadcn toggle).

Set global font (Inter) and sensible container widths.

Acceptance criteria:

Header visible on all pages.

Theme toggle switches light/dark.

No background/hero changes.

Commit message:

feat(layout): add AppShell + TopNav + theme toggle (shadcn)


PR title:
feat(layout): AppShell + TopNav + theme toggle

TASK 2 ‚Äî Homepage structure (hero + grid zones)

Branch: feat/homepage-hero-grid
Goal: Two-column responsive layout for homepage with placeholders.

Steps:

In /app/page.tsx, add:

Left: Headline (‚ÄúMeet Wessley.‚Äù), subhead (1‚Äì2 lines), CTA button (‚ÄúStart Building ‚Üí‚Äù).

Right: a div container named bg-grid (empty class) reserved for Sahar‚Äôs background work (leave styles empty).

Ensure responsive behavior (stack on mobile).

Acceptance criteria:

Content aligns with screenshots provided.

Class bg-grid exists but has no styles yet.

Commit message:

feat(home): hero left column + reserved bg-grid container (unstyled)


PR title:
feat(home): hero and reserved background container

TASK 3 ‚Äî Message bus (Zustand) and types

Branch: feat/bus-types
Goal: Define scene/chat types and shared bus for commands/events (no 3D yet).

Steps:

Create /lib/types/scene.ts and /lib/types/chat.ts:

SceneComponent, SceneCommand (FOCUS, HIGHLIGHT, CLEAR_HIGHLIGHT, SET_VIEW, THEME), SceneEvent.

ChatToolCall, ChatMessage.

Create /lib/bus/useSceneBus.ts:

Holds components: SceneComponent[].

dispatch(cmd: SceneCommand) (no-op for now, logs are OK).

subscribe(fn) to receive SceneEvents.

Create /lib/bus/useChatBus.ts with a helper handleToolCall(call) translating to scene commands.

Acceptance criteria:

Types compile.

Importing bus from any client component is possible.

No circular imports.

Commit message:

feat(bus): add Scene/Chat types and Zustand message bus for commands/events


PR title:
feat(bus): scene/chat types + Zustand bus

TASK 4 ‚Äî Scene placeholder + Explorer

Branch: feat/scene-explorer
Goal: Add a visual Scene card and an Explorer panel listing components.

Steps:

components/scene/SceneCanvas: Card with fixed height placeholder. Hooks into bus by replacing dispatch with a function that logs commands (to be replaced with 3D engine later).

components/scene/SceneExplorer: Card with title ‚ÄúScene Explorer‚Äù, scrollable list of mock components (3‚Äì5 items). Each item has a small ‚ÄúFocus‚Äù button that dispatches FOCUS.

Acceptance criteria:

Scene card renders on homepage.

Explorer lists mock items and dispatches on click (visible in console logs).

Fully responsive.

Commit message:

feat(scene): add SceneCanvas placeholder and SceneExplorer with mock components


PR title:
feat(scene): SceneCanvas placeholder + Explorer

TASK 5 ‚Äî ChatUI panel integration

Branch: feat/chatui-panel
Goal: Add ChatUI panel that can send local tool commands to the scene.

Steps:

components/chat/ChatPanel: ChatUI with:

Initial assistant message: ‚ÄúWhat kind of car are we working on?‚Äù

Placeholder input hint: Try /focus BATTERY01 or /view left.

Parse commands using simple syntax:

/focus <id> ‚Üí FOCUS

/highlight <id id id> ‚Üí HIGHLIGHT

/view <iso|left|right|front|rear|top> ‚Üí SET_VIEW

Wire to handleToolCall() ‚Üí useSceneBus().dispatch(...).

Load ChatPanel client-side only (dynamic import, no SSR) to avoid CSS/DOM issues.

Acceptance criteria:

Typing /focus battery01 yields a console log from SceneCanvas.

Regular messages render as bubbles.

No hydration or CSS warnings in console.

Commit message:

feat(chat): add ChatUI panel with local /focus,/highlight,/view commands -> SceneBus


PR title:
feat(chat): ChatUI panel with tool commands

TASK 6 ‚Äî Homepage composition (Scene + Chat + Explorer)

Branch: feat/homepage-compose
Goal: Compose the homepage with three sections: Scene, Explorer, Chat.

Steps:

Grid layout:

Desktop: right column stacks Scene (top) + Explorer (below); left column is hero text.

Mobile: hero ‚Üí Scene ‚Üí Explorer ‚Üí Chat (vertical stack).

Place Chat card below Scene/Explorer on mobile and right column on desktop (OK if stacked under Scene for now).

Acceptance criteria:

Layout mirrors the provided mockups (functionally).

All three panels work simultaneously and responsively.

Commit message:

feat(home): compose hero + scene + explorer + chat into responsive homepage


PR title:
feat(home): compose Scene/Explorer/Chat on homepage

TASK 7 ‚Äî Accessibility, QA, and polish

Branch: chore/qa-a11y-polish
Goal: Ensure a11y, keyboard navigation, responsive spacing, and code quality.

Steps:

Ensure landmark roles (nav/main).

All interactive elements reachable by keyboard; focus styles visible.

Check mobile breakpoints (sm/md/lg) and spacing/borders.

Add aria-labels to buttons (‚ÄúFocus <name>‚Äù, ‚ÄúSend message‚Äù, ‚ÄúTheme toggle‚Äù).

Lint + typecheck + minimal unit test shell if needed (optional).

Acceptance criteria:

No a11y violations in manual quick pass.

No console errors.

npm run lint and npm run check pass.

Commit message:

chore(qa): a11y pass, keyboard focus, responsive checks, lint & typecheck clean


PR title:
chore(qa): accessibility and polish

TASK 8 ‚Äî Demo fixtures & documentation

Branch: docs/fixtures-and-readme
Goal: Provide mock components and contributor docs.

Steps:

Add a small JSON fixture under public/fixtures/components.mock.json with 5 components (Battery, Fuse Box, Ground G103, Alternator, ECU).

Load fixture into SceneExplorer at mount (no backend calls).

Create README_FE.md describing:

How to run the app

How the bus works

How to add a new scene command

How to connect a real backend later

Add a short Loom/GIF or screenshots to PR.

Acceptance criteria:

Explorer populated from JSON fixture.

README present and accurate.

Commit message:

docs(fe): add mock components fixture + README for running and extending FE


PR title:
docs(fe): fixtures and contributor quickstart

Definition of Done (global)

‚úÖ All tasks merged into main.

‚úÖ Homepage shows hero, Scene, Explorer, Chat.

‚úÖ Light/dark themes working.

‚úÖ Local chat commands dispatch to the Scene bus and are logged by the Scene placeholder.

‚úÖ No changes to background visual styles (reserved for separate work).

‚úÖ Lint + typecheck pass; manual a11y sanity pass complete.

‚úÖ Screenshots attached in final PR.

Out-of-scope (for this phase)

3D rendering, cameras, or physics.

Real LLM or backend connectivity.

Auth, routing beyond /.

Fetching real vehicle data.

Bonus (only if time remains)

Add a Sheet (shadcn) to show ‚ÄúSelect Config‚Äù for vehicle presets (non-functional).

Add Toast confirmations when commands are sent from chat.

Commit message:

feat(ux): add optional Config sheet and toast confirmations for chat commands
